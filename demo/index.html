<!DOCTYPE html>
<html>
<head>
    <title>Boruca Messaging Demo</title>
    <script src="../src/boruca.js"></script>
</head>
<body>
    <h1>Top Frame</h1>
    <iframe src="./iframe.html"></iframe>

    <script>
        const $iframe = document.querySelector('iframe');
        const targetWindow = $iframe.contentWindow;
        const targetOrigin = window.location.origin;

        class TopLevel {
            increase(number) {
                return number + 1;
            }

            echo(message) {
                return 'TopLevel Echo: ' + message;
            }
        }

        Boruca.proxy(targetWindow, targetOrigin, TopLevel).then(async iFrameProxy => {
            console.log(await iFrameProxy.echo("I'm sending this from the top window!"));
            console.log(await iFrameProxy.increase(100));
        });
    </script>
</body>
</html>
